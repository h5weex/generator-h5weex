<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>h5weex</title>
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <meta name="apple-touch-fullscreen" content="yes" />
  <meta name="format-detection" content="telephone=no, email=no" />
  <style>
    html, body, #weex {
      width: 100%;
      height: 100%;
      background: #eeeeee;
    }
  </style>

  <!-- lib.flexible -->
  <script src="//g.alicdn.com/mtb/lib-flexible/0.3.4/??flexible_css.js,flexible.js"></script>
  <script src="//g.alicdn.com/weex/weex-html5/0.3.4/weex.js"></script>
</head>
<body>
  <div id="weex"></div>
  <script>
  (function () {
    function getUrlParam (key) {
      var reg = new RegExp('[?|&]' + key + '=([^&]+)');
      var match = location.search.match(reg);
      return match && match[1];
    }

    var loader = getUrlParam('loader') || 'xhr';
    var page = getUrlParam('_wx_tpl') || '';

    if(page == ''){
      var pagelist = [];
      var htmlstr = '<h3 style="padding:10px;">该项目的页面有：</h3><ul style="padding:10px;">';
      for(var i in pagelist){
        htmlstr += '<li style="height:30px;line-height:30px;"><a href="index.html?_wx_tpl=build/'+pagelist[i]+'.bundle.js">'+pagelist[i]+'.we</a></li>';
      }
      htmlstr += '</ul>';
      document.getElementById('weex').innerHTML = htmlstr;
    }
    else {
      window.weex.init({
        appId: location.href,
        loader: loader,
        source: page,
        rootId: 'weex'
      });
    }
  })();
  </script>
</body>
</html>
